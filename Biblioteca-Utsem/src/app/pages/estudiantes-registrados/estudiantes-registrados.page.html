<ion-content class="ion-padding">
  <div class="container">
    <h1 class="titulo-principal">ESTUDIANTES REGISTRADOS</h1>

    <!-- ðŸ” Barra de bÃºsqueda -->
    <div class="barra-busqueda">
      <ion-input
        [(ngModel)]="busqueda"
        placeholder="Buscar estudiante..."
        class="custom-searchbar"
      ></ion-input>

      <ion-button fill="solid" (click)="buscar()">
        Buscar
      </ion-button>

      <ion-button fill="solid" (click)="limpiar()">
        Limpiar
      </ion-button>

      <ion-button fill="solid" (click)="agregarNuevo()">
        + Nuevo
      </ion-button>
    </div>

    <!-- ðŸ“‹ Tabla -->
    <div class="tabla-container">
      <table class="tabla-estudiantes">
        <thead>
          <tr>
            <th>MATRICULA</th>
            <th>NOMBRE</th>
            <th>APELLIDOS</th>
            <th>CARRERA</th>
            <th>ACCION</th>
          </tr>
        </thead>
        <tbody>
          <tr 
            *ngFor="let estudiante of paginaActualDatos(); let i = index" 
            [class.fila-par]="i % 2 === 0"
            [class.fila-impar]="i % 2 !== 0"
          >
            <td>{{ estudiante.matricula }}</td>
            <td>{{ estudiante.nombre }}</td>
            <td>{{ estudiante.apellidoPaterno }} {{ estudiante.apellidoMaterno }}</td>
            <td>{{ estudiante.carreraNombre }}</td>
            <td class="columna-acciones">
              <ion-button fill="clear" size="small" (click)="editarEstudiante(estudiante)">
                <ion-icon slot="icon-only" name="create-outline"></ion-icon>
              </ion-button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- âŒ No resultados -->
      <div *ngIf="estudiantesFiltrados.length === 0" class="no-resultados">
        <p>No se encontraron estudiantes</p>
      </div>

      <!-- ðŸ“„ Paginado -->
      <div class="paginacion" *ngIf="totalPaginas > 1">
        <button (click)="irPrimera()" [disabled]="paginaActual === 1">Â«</button>
        <button (click)="paginaAnterior()" [disabled]="paginaActual === 1">â€¹</button>

        <button 
          *ngFor="let pagina of paginasArray"
          [class.activa]="paginaActual === pagina"
          (click)="irPagina(pagina)"
        >
          {{ pagina }}
        </button>

        <button (click)="paginaSiguiente()" [disabled]="paginaActual === totalPaginas">â€º</button>
        <button (click)="irUltima()" [disabled]="paginaActual === totalPaginas">Â»</button>
      </div>
    </div>
  </div>
</ion-content>

<app-loading></app-loading>
